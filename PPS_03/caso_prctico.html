<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_effects.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>Caso práctico. | UD 3: Detección y corrección de vulnerabilidades en aplicaciones web </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Pedro Antonio Santiago Santiago y José Gaspar Sánchez García" />
<meta name="generator" content="eXeLearning 2.6 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_effects.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-134"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">UD 3: Detección y corrección de vulnerabilidades en aplicaciones web</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">UD3. DETECCIÓN Y CORRECCIÓN DE VULNERABILIDADES DE APLICACIONES WEB</a></li>
   <li><a href="objetivos.html" class="no-ch">Objetivos</a></li>
   <li><a href="introduccin.html" class="no-ch">Introducción</a></li>
   <li><a href="1_protocolo_http.html" class="daddy">1.- Protocolo HTTP.</a>
   <ul class="other-section">
      <li><a href="11_formato_del_mensaje_http.html" class="no-ch">1.1.- Formato del mensaje HTTP.</a></li>
      <li><a href="12_versiones_del_protocolo.html" class="no-ch">1.2.- Versiones del protocolo.</a></li>
      <li><a href="13_tecnologas_web.html" class="no-ch">1.3. -Tecnologías Web.</a></li>
   </ul>
   </li>
   <li><a href="2desarrollo_seguro_de_aplicaciones_web.html" class="no-ch">2.-Desarrollo seguro de aplicaciones web.</a></li>
   <li><a href="3_listas_pblicas_de_vulnerabilidades_de_aplicaciones_web_owasp_top_ten.html" class="daddy">3.- Listas públicas de vulnerabilidades de aplicaciones web. OWASP Top Ten.</a>
   <ul class="other-section">
      <li><a href="31__inyeccin.html" class="no-ch">3.1. - Inyección.</a></li>
      <li><a href="32__prdida_de_autenticacin.html" class="no-ch">3.2. - Pérdida de autenticación.</a></li>
      <li><a href="33__exposicin_de_datos_sensibles.html" class="no-ch">3.3. - Exposición de datos sensibles.</a></li>
      <li><a href="34__entidades_externas_xml_xxe.html" class="no-ch">3.4. - Entidades externas XML (XXE).</a></li>
      <li><a href="35_prdida_de_control_de_acceso.html" class="no-ch">3.5. -Pérdida de Control de Acceso.</a></li>
      <li><a href="36_configuracin_de_seguridad_incorrecta.html" class="no-ch">3.6. -Configuración de seguridad incorrecta.</a></li>
      <li><a href="37__crosssite_scriptingxss.html" class="no-ch">3.7. - Cross-Site Scripting(XSS).</a></li>
      <li><a href="38__deserializacin_insegura.html" class="no-ch">3.8. - Deserialización insegura.</a></li>
      <li><a href="39__componentes_con_vulnerabilidades_conocidas.html" class="no-ch">3.9. - Componentes con vulnerabilidades conocidas.</a></li>
      <li><a href="310__registro_y_monitoreo_insuficientes.html" class="no-ch">3.10. - Registro y monitoreo insuficientes.</a></li>
   </ul>
   </li>
   <li><a href="4_entrada_basada_en_formularios_inyeccin_validacin_de_la_entrada.html" class="daddy">4.- Entrada basada en formularios. Inyección. Validación de la entrada.</a>
   <ul class="other-section">
      <li><a href="41__validacin_en_el_cliente.html" class="daddy">4.1. - Validación en el cliente.</a>
      <ul class="other-section">
         <li><a href="411_ejemplo_prctico_con_angular.html" class="no-ch">4.1.1.- Ejemplo práctico con Angular.</a></li>
      </ul>
      </li>
      <li><a href="42__validacin_en_el_servidor.html" class="daddy">4.2. - Validación en el servidor.</a>
      <ul class="other-section">
         <li><a href="421_ejemplo_prctico_con_nodejs.html" class="no-ch">4.2.1.- Ejemplo práctico con NodeJs</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="5__estndares_de_autenticacin_y_autorizacin.html" class="daddy">5. - Estándares de autenticación y autorización.</a>
   <ul class="other-section">
      <li><a href="51__elementos_de_un_sistema_de_autenticacin_y_autorizacin_bsico.html" class="no-ch">5.1. - Elementos de un sistema de autenticación y autorización básico.</a></li>
      <li><a href="52__estndares.html" class="daddy">5.2. - Estándares.</a>
      <ul class="other-section">
         <li><a href="521__tokens_jwt.html" class="daddy">5.2.1. - Tokens JWT</a>
         <ul class="other-section">
            <li><a href="5211__ejemplo_prctico_con_nodejs.html" class="no-ch">5.2.1.1. - Ejemplo práctico con NodeJs.</a></li>
         </ul>
         </li>
         <li><a href="522__oath.html" class="no-ch">5.2.2. - OAth.</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="6__robo_de_sesin.html" class="no-ch">6. - Robo de sesión.</a></li>
   <li><a href="7__almacenamiento_seguro_de_contraseas.html" class="daddy">7. - Almacenamiento seguro de contraseñas.</a>
   <ul class="other-section">
      <li><a href="71_ejemplo_almacenamiento_seguro_nodejs.html" class="no-ch">7.1.- Ejemplo almacenamiento seguro NodeJs.</a></li>
   </ul>
   </li>
   <li><a href="8__contramedidas_hsts_csp_captchas_entre_otros.html" class="daddy">8. - Contramedidas. HSTS, CSP, CAPTCHAs, entre otros.</a>
   <ul class="other-section">
      <li><a href="81__hsts_http_strict_transport_security.html" class="no-ch">8.1. - HSTS (HTTP Strict Transport Security)</a></li>
      <li><a href="82__csp_content_security_policy.html" class="no-ch">8.2. - CSP (Content Security Policy)</a></li>
      <li><a href="83__captchas.html" class="no-ch">8.3. - CAPTCHAs</a></li>
   </ul>
   </li>
   <li><a href="9__seguridad_de_portales_y_aplicativos_web_soluciones_wafweb_application_firewall.html" class="no-ch">9. - Seguridad de portales y aplicativos web. Soluciones WAF(Web Application Firewall).</a></li>
   <li id="active"><a href="caso_prctico.html" class="active no-ch">Caso práctico.</a></li>
   <li><a href="glosario.html" class="no-ch">Glosario</a></li>
   <li><a href="bibliografa.html" class="no-ch">Bibliografía</a></li>
   <li><a href="resumen.html" class="no-ch">Resumen</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="9__seguridad_de_portales_y_aplicativos_web_soluciones_wafweb_application_firewall.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="glosario.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">Caso práctico.</h1></header>
<article class="iDevice_wrapper EjercicioresueltofpdIdevice em_iDevice em_iDevice_ejercicioresueltofpd" id="id342">
<div class="iDevice emphasis_ejercicioresueltofpd" >
<header class="iDevice_header"><h1 class="iDeviceTitle">Ejercicio Resuelto</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section id="ta342_148" class="block story iDevice_content">
<p>El desarrollo de aplicaciones web seguras está muy influenciado por las tecnologías de cliente y servidor seleccionadas. En este caso práctico se desarrolla una API simple utilizando como lenguaje de servidor javascript con node.js , aunque si el alumno/a lo desea puede usar otras tecnologías con las que se encuentre más cómodo/a. Para probar las peticiones HTTP se puede utilizar alguna de las herramientas vistas en el módulo como POSTMAN</p>
<p>Se está implementando una pequeña aplicación web para la gestión del mantenimiento de piscinas. La persona de mantenimiento da de alta la dirección de la piscina  en en el sistema y cada vez que se realiza el mantenimiento indica:</p>
<ul>
<li>Fecha de la revisión.</li>
<li>Valores de Ph medidos.</li>
<li>Valores de Cloro.</li>
<li>Gramos de produco para incrementar el Ph utilizado.</li>
<li>Gramos de producto para decrementar el Ph utilizado.</li>
<li>Ml de antialgas.</li>
<li>Ml de fluoculante.</li>
<li>Gramos de cloro.</li>
<li>Comentario.</li>
</ul>
<p></p>
<figure class="exe-figure exe-image position-center license-CC-BY" style="width: 351px; text-align: center;"><img src="piscina.jpg" alt="Piscina" width="351" height="263" />
<figcaption class="figcaption"><a href="https://search.creativecommons.org/photos/237e58e0-d9ab-4bbc-967f-0927da62bbd2" target="_blank" class="author" rel="noopener">oatsy40 </a> <span class="license"><span class="sep">(</span><a href="http://creativecommons.org/licenses/?lang=es" rel="license nofollow noopener" target="_blank" title="Creative Commons BY">CC BY</a><span class="sep">)</span></span></figcaption>
</figure>
<p>La aplicación por supuesto permite gestionar las piscinas del sistema (alta, baja y borrado, no se implementa la modificación ya que no es el objetivo del módulo el desarrollo web) al igual que con los mantenimientos.</p>
<p></p>
</section>
<section id="taquesQuestion0b342" class="block iDevice_content">
<p>El departamento de desarrollo tiene la aplicación lista a falta de evaluar la seguridad de la aplicación, centrándose en:</p>
<ul>
<li>Comprobar que los datos introducidos por los usuarios son validos. CEa</li>
<li>Validar que no se puedan realizar ataques de  SQLInjection. CEb</li>
<li>Utilizar JWT para la gestión de autenticación y autorización. CEc</li>
<li>Usar el algoritmo sal y pimienta para el almacenamiento de las contraseñas.CEe</li>
</ul>
<p>Descargar el código de ejemplo sin ninguno de los puntos anteriores y tomando como guía los ejemplo añadir la seguridad necesaria.</p>
<ul>
<li>Es necesario instalar Nodejs y git.</li>
<li>Se recomienda utilizar Visual Studio Code, aunque el alumno puede utilizar el que considere.</li>
<li>Se recomienda usar POSTMAN para realizar las pruebas.</li>
<li>Ejecutar el comando: git clone  <a href="https://github.com/pass1enator/ppse_ut3.git">https://github.com/pass1enator/ppse_ut3.git</a> ,para descargar el código fuente inicial</li>
<li>Ejecutar el comando: npm install , para instalar todas las librerías necesarias definidas en package.json </li>
<li>Ejecutar desde la línea de comandos: npm start (definido en package.json, se pueden añadir nuevos comandos si se cree oportuno).</li>
<li>Abrir POSTMAN, crear una petición, por ejemplo a <span>localhost:3000/api/piscina, que devuelve el listado de piscinas creadas.</span></li>
<li><span>Las api tiene los siguientes endpoints:</span>
<ul>
<li><span>POST /api/login, login en el sistema, debe devolver el token JWT. Comprobar parámetros, almacenar clave con algoritmo sal y pimienta.</span></li>
<li><span>POST /api/piscina, alta de una piscina. (comprobar parámetros, comprobar token)</span></li>
<li><span>DELETE /api/piscina/:id, borrar una piscina en concreto. (comprobar parámetros, comprobar token)</span></li>
<li><span>GET /api/piscina, listado de todas las piscinas. ( comprobar token)</span></li>
<li><span>GET /api/piscina/:id, piscina concreta. (comprobar parámetros, comprobar token)</span></li>
<li><span>POST /api/piscina/:id/medicion, alta de una nueva medición. (comprobar parámetros, comprobar token)</span></li>
<li><span>DELETE /api/piscina/:idpiscina/medicion/:id, borrar una medición. (comprobar parámetros, comprobar token)</span></li>
<li><span>GET /api/piscina/:id/medicion, alta de una nueva medición. (comprobar parámetros, comprobar token)</span><span></span><span></span></li>
</ul>
</li>
<li><span>Para facilitar el desarrollo, el usuario se puede almacenar en una variable global en piscinaPPSE.js simulando el almacenamiento en una base de datos. Existe la clase usuario en la carpeta model.</span></li>
</ul>
<p><video width="500" height="240" style="display: block; margin-left: auto; margin-right: auto;" controls="controls" class="mediaelement">
<source src="practica.mp4" type="video/mp4" /></video></p>
<div class="exe-fx exe-accordion">
<h2>Descripción textual alternativa</h2>
<p>Puesta en marcha de la aplicación.</p>
</div>
<p></p>
</section>
<form name="feedback-form-quesFeedback0b342" action="#" onsubmit="return false" class="feedback-form">
<div class="block iDevice_buttons feedback-button js-required">
<p><script type="text/javascript">var feedbackquesFeedback0b342text = "Mostrar retroalimentación";</script><input type="button" name="toggle-feedback-quesFeedback0b342" value="Mostrar retroalimentación" class="feedbackbutton feedback-toggler" /></p>
</div>
<section id="feedback-quesFeedback0b342" class="feedback js-feedback js-hidden">
<h1 class="js-sr-av">Retroalimentación</h1>
<p>Descargar el código resuelto de repositorio: <a href="https://github.com/pass1enator/ppse_ut3_resuelto">https://github.com/pass1enator/ppse_ut3_resuelto</a> </p></section>
</form>
</div>
</div>
</div>
</article>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="9__seguridad_de_portales_y_aplicativos_web_soluciones_wafweb_application_firewall.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="glosario.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<script type="text/javascript" src="_intef_js.js"></script></body></html>