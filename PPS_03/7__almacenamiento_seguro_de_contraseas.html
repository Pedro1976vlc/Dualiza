<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_effects.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>7. - Almacenamiento seguro de contraseñas. | UD 3: Detección y corrección de vulnerabilidades en aplicaciones web </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Pedro Antonio Santiago Santiago y José Gaspar Sánchez García" />
<meta name="generator" content="eXeLearning 2.6 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_effects.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-127"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">UD 3: Detección y corrección de vulnerabilidades en aplicaciones web</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">UD3. DETECCIÓN Y CORRECCIÓN DE VULNERABILIDADES DE APLICACIONES WEB</a></li>
   <li><a href="objetivos.html" class="no-ch">Objetivos</a></li>
   <li><a href="introduccin.html" class="no-ch">Introducción</a></li>
   <li><a href="1_protocolo_http.html" class="daddy">1.- Protocolo HTTP.</a>
   <ul class="other-section">
      <li><a href="11_formato_del_mensaje_http.html" class="no-ch">1.1.- Formato del mensaje HTTP.</a></li>
      <li><a href="12_versiones_del_protocolo.html" class="no-ch">1.2.- Versiones del protocolo.</a></li>
      <li><a href="13_tecnologas_web.html" class="no-ch">1.3. -Tecnologías Web.</a></li>
   </ul>
   </li>
   <li><a href="2desarrollo_seguro_de_aplicaciones_web.html" class="no-ch">2.-Desarrollo seguro de aplicaciones web.</a></li>
   <li><a href="3_listas_pblicas_de_vulnerabilidades_de_aplicaciones_web_owasp_top_ten.html" class="daddy">3.- Listas públicas de vulnerabilidades de aplicaciones web. OWASP Top Ten.</a>
   <ul class="other-section">
      <li><a href="31__inyeccin.html" class="no-ch">3.1. - Inyección.</a></li>
      <li><a href="32__prdida_de_autenticacin.html" class="no-ch">3.2. - Pérdida de autenticación.</a></li>
      <li><a href="33__exposicin_de_datos_sensibles.html" class="no-ch">3.3. - Exposición de datos sensibles.</a></li>
      <li><a href="34__entidades_externas_xml_xxe.html" class="no-ch">3.4. - Entidades externas XML (XXE).</a></li>
      <li><a href="35_prdida_de_control_de_acceso.html" class="no-ch">3.5. -Pérdida de Control de Acceso.</a></li>
      <li><a href="36_configuracin_de_seguridad_incorrecta.html" class="no-ch">3.6. -Configuración de seguridad incorrecta.</a></li>
      <li><a href="37__crosssite_scriptingxss.html" class="no-ch">3.7. - Cross-Site Scripting(XSS).</a></li>
      <li><a href="38__deserializacin_insegura.html" class="no-ch">3.8. - Deserialización insegura.</a></li>
      <li><a href="39__componentes_con_vulnerabilidades_conocidas.html" class="no-ch">3.9. - Componentes con vulnerabilidades conocidas.</a></li>
      <li><a href="310__registro_y_monitoreo_insuficientes.html" class="no-ch">3.10. - Registro y monitoreo insuficientes.</a></li>
   </ul>
   </li>
   <li><a href="4_entrada_basada_en_formularios_inyeccin_validacin_de_la_entrada.html" class="daddy">4.- Entrada basada en formularios. Inyección. Validación de la entrada.</a>
   <ul class="other-section">
      <li><a href="41__validacin_en_el_cliente.html" class="daddy">4.1. - Validación en el cliente.</a>
      <ul class="other-section">
         <li><a href="411_ejemplo_prctico_con_angular.html" class="no-ch">4.1.1.- Ejemplo práctico con Angular.</a></li>
      </ul>
      </li>
      <li><a href="42__validacin_en_el_servidor.html" class="daddy">4.2. - Validación en el servidor.</a>
      <ul class="other-section">
         <li><a href="421_ejemplo_prctico_con_nodejs.html" class="no-ch">4.2.1.- Ejemplo práctico con NodeJs</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="5__estndares_de_autenticacin_y_autorizacin.html" class="daddy">5. - Estándares de autenticación y autorización.</a>
   <ul class="other-section">
      <li><a href="51__elementos_de_un_sistema_de_autenticacin_y_autorizacin_bsico.html" class="no-ch">5.1. - Elementos de un sistema de autenticación y autorización básico.</a></li>
      <li><a href="52__estndares.html" class="daddy">5.2. - Estándares.</a>
      <ul class="other-section">
         <li><a href="521__tokens_jwt.html" class="daddy">5.2.1. - Tokens JWT</a>
         <ul class="other-section">
            <li><a href="5211__ejemplo_prctico_con_nodejs.html" class="no-ch">5.2.1.1. - Ejemplo práctico con NodeJs.</a></li>
         </ul>
         </li>
         <li><a href="522__oath.html" class="no-ch">5.2.2. - OAth.</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="6__robo_de_sesin.html" class="no-ch">6. - Robo de sesión.</a></li>
   <li id="active"><a href="7__almacenamiento_seguro_de_contraseas.html" class="active daddy">7. - Almacenamiento seguro de contraseñas.</a>
   <ul>
      <li><a href="71_ejemplo_almacenamiento_seguro_nodejs.html" class="no-ch">7.1.- Ejemplo almacenamiento seguro NodeJs.</a></li>
   </ul>
   </li>
   <li><a href="8__contramedidas_hsts_csp_captchas_entre_otros.html" class="daddy">8. - Contramedidas. HSTS, CSP, CAPTCHAs, entre otros.</a>
   <ul class="other-section">
      <li><a href="81__hsts_http_strict_transport_security.html" class="no-ch">8.1. - HSTS (HTTP Strict Transport Security)</a></li>
      <li><a href="82__csp_content_security_policy.html" class="no-ch">8.2. - CSP (Content Security Policy)</a></li>
      <li><a href="83__captchas.html" class="no-ch">8.3. - CAPTCHAs</a></li>
   </ul>
   </li>
   <li><a href="9__seguridad_de_portales_y_aplicativos_web_soluciones_wafweb_application_firewall.html" class="no-ch">9. - Seguridad de portales y aplicativos web. Soluciones WAF(Web Application Firewall).</a></li>
   <li><a href="caso_prctico.html" class="no-ch">Caso práctico.</a></li>
   <li><a href="glosario.html" class="no-ch">Glosario</a></li>
   <li><a href="bibliografa.html" class="no-ch">Bibliografía</a></li>
   <li><a href="resumen.html" class="no-ch">Resumen</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="6__robo_de_sesin.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="71_ejemplo_almacenamiento_seguro_nodejs.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">7. - Almacenamiento seguro de contraseñas.</h1></header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id267">
<div class="iDevice emphasis0">
<div id="ta267_154" class="block iDevice_content">
<p style="text-align: justify;"><span style="font-weight: 400;">Todas las medidas anteriores no sirven para mucho si los atacantes consiguen acceder al sistema en el que se almacenan los usuarios, las contraseñas y los datos sensibles de la aplicación, estos almacenes son variados, aunque en la mayor parte de los casos son bases de datos relacionales como MySQL,  SQLServer o PostgreSQL.</span></p>
<p style="text-align: justify;"><span style="font-weight: 400;">Existen diferentes ataques que en caso de tener éxito consiguen el acceso a la información como inyección de código, existencia de contraseña por defecto o exposición de datos sensibles.</span></p>
<p style="text-align: justify;"><span style="font-weight: 400;">Por ejemplo en el año 2011 la empresa Sony fue objeto de un ataque que consiguio robar más de 11 millones de cuentas de usuarios de PlayStation en la que se incluían contraseñas y datos bancarios o la aplicación de Spotify que en el 2016 sufrió el robo de millones de credenciales de usuarios.</span></p>
<p style="text-align: justify;"><span style="font-weight: 400;"></span></p>
<p style="text-align: justify;"><span style="font-weight: 400;"></span></p>
</div>
</div>
</article>
<article class="iDevice_wrapper DestacadofpdIdevice" id="id269">
<div class="iDevice emphasis0" >
<div class="iDevice_destacadofpd">
<div id="ta269_151" class="block iDevice_content">
<p><span style="font-weight: 400;">Nunca se han de almacenar los datos sensibles y contraseñas en texto claro, ya sea en base de datos, ficheros de texto o cualquier otro sistema de almacenamiento.</span></p>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper ReflectionfpdmodifIdevice em_iDevice em_iDevice_reflexionfpd" id="id271">
<div class="iDevice emphasis_reflexionfpd" >
<header class="iDevice_header"><h1 class="iDeviceTitle">Reflexiona</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta271_121" class="block iDevice_content">
<p><span style="font-weight: 400;">¿Cuál es la razón de no utilizar criptografía asimétrica para almacenar la información si se considera la más segura?</span></p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id268">
<div class="iDevice emphasis0">
<div id="ta268_154" class="block iDevice_content">
<p><span style="font-weight: 400;">Este apartado se centra en el almacenamiento seguro de contraseñas en bases de datos aunque si se almacena con otros métodos la forma de protegerlas es la misma </span><b>criptografía. </b><span style="font-weight: 400;">Esta codificación se puede realizar en:</span></p>
<ul>
<li aria-level="1" style="font-weight: 400;"><span style="font-weight: 400;">Aplicación en el lado del servidor. Utilizando funciones y librerías propias del lenguaje o de terceros codificar los datos antes de insertar en la base de datos, para recuperarlos se realiza el proceso inverso, se suele utilizar<strong> funciones hash</strong>,<strong> funciones hash con semilla</strong>, <strong>algoritmos simétricos</strong> (misma clave para codificar y descodificar) o <strong>combinaciones de los anteriores</strong>.</span></li>
</ul>
<figure class="exe-figure exe-image position-center license-CC-BY-SA" style="width: 450px;"><img width="450" height="263" alt="Ejemplo funcioens hash" src="hash.png" />
<figcaption class="figcaption"><a class="author" href="https://es.wikipedia.org/wiki/Funci%C3%B3n_hash#/media/Archivo:Hash_function2-es.svg" target="_blank" rel="noopener">Fercufer </a>. <span class="title"><em>Ejemplo funciones HASH</em></span> <span class="license"><span class="sep">(</span><a title="Creative Commons BY-SA" href="http://creativecommons.org/licenses/?lang=es" target="_blank" rel="license nofollow noopener">CC BY-SA</a><span class="sep">)</span></span></figcaption>
</figure>
<ul>
<li aria-level="1" style="font-weight: 400;"><span style="font-weight: 400;">Delegar en la base de datos la codificación. En la sentencia SQL se le indica que utilice funciones de codificación del propio motor de base de datos, dependiendo del motor se dispondrá de más o menos algoritmos, aunque suelen disponer de los más conocidos. En el siguiente enlace se listan las funciones criptográficas de MySQL.</span>
<ul>
<li aria-level="1" style="font-weight: 400;">
<ul>
<li aria-level="1" style="font-weight: 400;"><span style="font-weight: 400;">En el siguiente enlace se listan las funciones criptográficas de Mysql.</span></li>
</ul>
<p style="text-align: center;"><a href="https://dev.mysql.com/doc/refman/8.0/en/encryption-functions.html"><span style="font-weight: 400;">https://dev.mysql.com/doc/refman/8.0/en/encryption-functions.html</span></a></p>
</li>
</ul>
</li>
</ul>
<p></p>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice em_iDevice_parasabermasfpd" id="id270">
<div class="iDevice emphasis_parasabermasfpd" >
<header class="iDevice_header"><h1 class="iDeviceTitle">Para saber más</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta270_128" class="block iDevice_content">
<figure class="exe-figure exe-media position-center" style="width: 350px;"><iframe width="350" height="314" data-mce-fragment="1" allowfullscreen="allowfullscreen" src="https://www.youtube.com/embed/ZM8JLG5vVhE"></iframe>
<figcaption class="figcaption"><span class="title"><em>Robo de contraseñas Sony</em></span></figcaption>
</figure>
<div class="exe-fx exe-accordion">
<h2>Descripción textual alternativa.</h2>
<p><span style="font-weight: 400;">Noticia de la agencia F sobre el robo a Sony </span></p>
</div>
<p></p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id272">
<div class="iDevice emphasis0">
<div id="ta272_154" class="block iDevice_content">
<p style="text-align: justify;"><span style="font-weight: 400;">Pero codificar los datos no garantiza la seguridad ante el robo, el procedimiento ha de ser robusto y seguro, el proceso a de garantizar:</span></p>
<ul style="text-align: justify;">
<li aria-level="1" style="font-weight: 400;"><span style="font-weight: 400;"> Cifrar la información esencial.</span></li>
<li aria-level="1" style="font-weight: 400;"><span style="font-weight: 400;">Almacenar en lugar seguro las claves, certificados y contraseñas</span></li>
<li aria-level="1" style="font-weight: 400;"><span style="font-weight: 400;">Proteger el acceso de secretos en memoria.</span></li>
<li aria-level="1" style="font-weight: 400;"><span style="font-weight: 400;">En caso de usar elementos aleatorios, han de tener una alta entropía, es decir poder conocer el resultado del cálculo ha de ser prácticamente imposible, una buena elección puede ser los valores de tensión de la fuente de alimentación y una mala el ritmo de pulsación del teclado por parte del usuario (se puede analizar y prever).</span></li>
<li aria-level="1" style="font-weight: 400;"><span style="font-weight: 400;">Elección pobre de algoritmo o de la clave. Existen algoritmos  con fallos de diseño o que son fácilmente descifrables por fuerza bruta dada una clave débil, en el primer caso se tiene el algoritmo DES,  WEP o la función hash MD5. </span></li>
<li aria-level="1" style="font-weight: 400;"><span style="font-weight: 400;">Fallo al incluir soporte para cambios en las claves de encriptación y otros procedimientos de mantenimiento requeridos. Al realizar un cambio los datos almacenados no se pueden volver a obtener.</span></li>
</ul>
<p style="text-align: justify;"><span style="font-weight: 400;">Históricamente se han almacenado utilizando <strong>funciones hash</strong>, pero ante el robo de grandes cantidades de contraseñas ocurridas en los últimos años se han desarrollado <strong>nuevos algoritmos</strong> para imposibilitar la descodificación de las contraseñas:</span></p>
<ul>
<li aria-level="1" style="text-align: justify; font-weight: 400;"><span style="font-weight: 400;">Una de las técnicas más efectivas para el almacenamiento de contraseñas es combinar la función resumen con la inclusión de una serie de bits (aleatorios o predefinidos) almacenados en un lugar seguro que se añaden al inicio o al final del texto codificado con hash de forma que sea inútil en ataque con tablas precalculadas (Rainbow tables) y dificulte el ataque por diccionario y por fuerza bruta. A este algoritmo se le denomina <strong>sal</strong> (salt en inglés) ya que se añade a cada clave, </span><b>cada serie de bits es única para cada usuario y se suele almacenar en la base de datos.</b></li>
<li aria-level="1" style="text-align: justify; font-weight: 400;"><span style="font-weight: 400;">Una evolución de la anterior es añadir <strong>pimienta</strong>, que consiste en añadir un texto (unos pocos caracteres) al password con la característica de que dicho texto no se almacena en la base de datos y es el mismo para todas las contraseñas.</span></li>
</ul>
</div>
</div>
</article>
<article class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice em_iDevice_debesconocerfpd" id="id273">
<div class="iDevice emphasis_debesconocerfpd" >
<header class="iDevice_header"><h1 class="iDeviceTitle">Debes conocer</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta273_129" class="block iDevice_content">
<figure class="exe-figure exe-media position-center" style="width: 300px;"><iframe width="300" height="314" data-mce-fragment="1" allowfullscreen="allowfullscreen" src="https://www.youtube.com/embed/PsIO0gxJF3g"></iframe>
<figcaption class="figcaption"><span class="title"><em>Funcionamiento algoritmo salt</em></span></figcaption>
</figure>
<div class="exe-fx exe-accordion">
<h2>Descripción textual alternativa.</h2>
<p>Explicación gráfica de la aplicación del método salt para proteger contraseñas con hash.</p>
</div>
<p></p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice em_iDevice_debesconocerfpd" id="id274">
<div class="iDevice emphasis_debesconocerfpd" >
<header class="iDevice_header"><h1 class="iDeviceTitle">Debes conocer</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta274_129" class="block iDevice_content">
<p>Manual para guardar contraseñas seguras en MySQL:</p>
<p style="text-align: center;"><span style="background-color: #f9f9f9;">http://mysqldatabaseadministration.blogspot.com/2006/08/storing-passwords-in-mysql.html</span></p>
</div>
</div>
</div>
</div>
</article>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="6__robo_de_sesin.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="71_ejemplo_almacenamiento_seguro_nodejs.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<script type="text/javascript" src="_intef_js.js"></script></body></html>