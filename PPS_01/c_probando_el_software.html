<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_effects.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>C.- Probando el software | UD 1. Prueba de aplicaciones web y para dispositivos móviles </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Pedro Antonio Santiago Santiago y José Gaspar Sánchez García" />
<meta name="generator" content="eXeLearning 2.6 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_effects.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-103"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">UD 1. Prueba de aplicaciones web y para dispositivos móviles</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">UD 1: PRUEBA DE APLICACIONES WEB Y PARA DISPOSITIVOS MÓVILES</a></li>
   <li><a href="objetivos.html" class="no-ch">Objetivos</a></li>
   <li><a href="introduccin.html" class="no-ch">Introducción</a></li>
   <li><a href="1_fundamentos_de_la_programacin.html" class="daddy">1.- Fundamentos de la programación</a>
   <ul class="other-section">
      <li><a href="11_fundamentos_de_los_lenguajes_ms_utilizados_i.html" class="no-ch">1.1.- Fundamentos de los lenguajes más utilizados I</a></li>
      <li><a href="12_fundamentos_de_los_lenguajes_ms_utilizados_ii.html" class="no-ch">1.2.- Fundamentos de los lenguajes más utilizados II</a></li>
   </ul>
   </li>
   <li><a href="2_lenguajes_de_programacin_interpretados_y_compilados.html" class="daddy">2.- Lenguajes de programación interpretados y compilados</a>
   <ul class="other-section">
      <li><a href="21_compilacin_en_tiempo_de_ejecucin.html" class="no-ch">2.1.- Compilación en tiempo de ejecución</a></li>
   </ul>
   </li>
   <li><a href="3_cdigo_fuente_y_entornos_de_desarrollo.html" class="daddy">3.- Código fuente y entornos de desarrollo</a>
   <ul class="other-section">
      <li><a href="31__entornos_de_desarrollo.html" class="no-ch">3.1. - Entornos de desarrollo</a></li>
   </ul>
   </li>
   <li><a href="4_ejecucin_de_software.html" class="no-ch">4.- Ejecución de software</a></li>
   <li><a href="5_elementos_principales_de_un_programa.html" class="no-ch">5. -Elementos principales de un programa</a></li>
   <li><a href="6_pruebas.html" class="daddy">6.- Pruebas</a>
   <ul class="other-section">
      <li><a href="61_etapas_o_niveles_de_pruebas.html" class="daddy">6.1.- Etapas o niveles de pruebas</a>
      <ul class="other-section">
         <li><a href="611_pruebas_unidad.html" class="no-ch">6.1.1.- Pruebas unidad</a></li>
         <li><a href="612_pruebas_de_integracin.html" class="no-ch">6.1.2.- Pruebas de integración</a></li>
         <li><a href="613_pruebas_de_sistema.html" class="no-ch">6.1.3.- Pruebas de sistema</a></li>
         <li><a href="614_pruebas_de_aceptacin.html" class="no-ch">6.1.4.- Pruebas de aceptación</a></li>
      </ul>
      </li>
      <li><a href="62_tipos_de_pruebas.html" class="daddy">6.2.- Tipos de pruebas</a>
      <ul class="other-section">
         <li><a href="621_pruebas_funcionales.html" class="no-ch">6.2.1.- Pruebas funcionales</a></li>
         <li><a href="622_pruebas_no_funcionales.html" class="no-ch">6.2.2.- Pruebas no funcionales</a></li>
      </ul>
      </li>
      <li><a href="63_tcnicas_de_prueba.html" class="daddy">6.3.- Técnicas de prueba</a>
      <ul class="other-section">
         <li><a href="631_pruebas_de_caja_negra.html" class="no-ch">6.3.1.- Pruebas de caja negra</a></li>
         <li><a href="632_pruebas_de_caja_blanca.html" class="no-ch">6.3.2.- Pruebas de caja blanca</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="7_seguridad_en_los_lenguajes_de_programacin_y_sus_entornos_de_ejecucin_sandboxes.html" class="no-ch">7. -Seguridad en los lenguajes de programación y sus entornos de ejecución (“sandboxes”).</a></li>
   <li class="current-page-parent"><a href="caso_prctico_mochachai.html" class="current-page-parent daddy">Caso práctico: Mocha-Chai</a>
   <ul>
      <li><a href="a_preparando_el_entorno.html" class="no-ch">A.- Preparando el entorno</a></li>
      <li><a href="b_desarrollando_el_software.html" class="no-ch">B.- Desarrollando el software</a></li>
      <li id="active"><a href="c_probando_el_software.html" class="active no-ch">C.- Probando el software</a></li>
      <li><a href="d_ampliacin.html" class="no-ch">D.- Ampliación</a></li>
   </ul>
   </li>
   <li><a href="glosario.html" class="no-ch">Glosario</a></li>
   <li><a href="bibliografa.html" class="no-ch">Bibliografía</a></li>
   <li><a href="resumen.html" class="no-ch">Resumen</a></li>
   <li><a href="recursos_adicionales.html" class="no-ch">Recursos adicionales</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="b_desarrollando_el_software.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="d_ampliacin.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">C.- Probando el software</h1></header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id206">
<div class="iDevice emphasis0">
<div id="ta206_154" class="block iDevice_content">
<p><span style="font-weight: 400;">En primer lugar, se deben escribir los ficheros que contienen las especificaciones de los casos de prueba unitarias para cada componente individual.</span></p>
<p><span style="font-weight: 400;">Para probar el software utilizando las utilidades y herramientas ofrecidas por </span><b>Mocha-Chai</b><span style="font-weight: 400;"> para </span><b>JavaScript,</b><span style="font-weight: 400;"> es necesario conocer y comprender su funcionamiento:</span></p>
<p><span style="font-weight: 400;">Generalmente los ficheros que albergan los casos de prueba tienen extensión </span><b><i>spec.js</i></b><b>.</b><span style="font-weight: 400;"> y presenta la siguiente estructura:</span></p>
<div class="exe-fx exe-timeline">
<h2><span style="font-weight: 400;">Estructura básica de un fichero de prueba Mocha</span></h2>
<h3><span style="font-weight: 400;">La cabecera</span></h3>
<p><span style="font-weight: 400;">En la parte superior del fichero de especificaciones se puede ver algo similar a lo siguiente:</span></p>
<p><img src="img0.2.png" width="491" height="83" alt="Cabecera fichero prueba Mocha" style="display: block; margin-left: auto; margin-right: auto;" /></p>
<ul>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Importación de las interfaces chai, que permiten realizar las aserciones.</span></li>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Importación de la clase del objeto o componente  que va ser sometido al proceso de prueba.</span></li>
</ul>
<h3><span style="font-weight: 400;">Describe</span></h3>
<p><span style="font-weight: 400;">Este elemento permite definir los bloques de pruebas relacionados entre sí. Es posible concatenar varios </span><b><i>“describe”</i></b><span style="font-weight: 400;"> para organizar adecuadamente la estructura de los tests.</span></p>
<p><span style="font-weight: 400;">La función de </span><b>descripción</b><span style="font-weight: 400;"> es para agrupar especificaciones relacionadas, por lo general, cada archivo de prueba tiene uno en el nivel superior. El parámetro cadena sirve para nombrar la colección de especificaciones y se concatena con especificaciones para crear el nombre completo de una especificación. </span></p>
<p><span style="font-weight: 400;"><img src="img1.2.png" width="450" height="251" alt="Describe fichero de prueba Mocha" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<h3><span style="font-weight: 400;">It</span></h3>
<p><span style="font-weight: 400;">Cada elemento “</span><b>it”</b><span style="font-weight: 400;"> es una prueba. Existe la posibilidad de definir todas las pruebas </span><b><i>(it)</i></b><span style="font-weight: 400;"> que sean necesarias dentro de un elemento describe. Las pruebas pueden estar divididas entre varios elementos de tipo </span><b><i>“describe”</i></b><span style="font-weight: 400;">. Esto es útil si queremos diferenciar varios bloques de pruebas en un mismo fichero.</span><span style="font-weight: 400;"></span></p>
<h3><span style="font-weight: 400;">Diferentes estilos de aserciones: assert, expect y should.</span></h3>
<p><span style="font-weight: 400;">Chai soporta diferentes interfaces para escribir aserciones para las pruebas, lo que permite al desarrollador escoger el estilo que le resulte más cómodo. Los estilos </span><b>BDD</b><span style="font-weight: 400;"> (</span><b><i>Behavior Driven Development</i></b><span style="font-weight: 400;">) - </span><b><i>expect</i></b><span style="font-weight: 400;"> y </span><b><i>should</i></b><span style="font-weight: 400;"> - proporcionan un lenguaje expresivo y un estilo legible, mientras que el estilo </span><b>TDD</b><span style="font-weight: 400;"> (</span><b><i>Test Driven Development</i></b><span style="font-weight: 400;">) - </span><b><i>assert </i></b><i><span style="font-weight: 400;">-</span></i><span style="font-weight: 400;"> proporciona una sensación más clásica.</span></p>
<ul>
<li><b>Estilo </b><b><i>Test Driven Development</i></b><b>, assert. </b></li>
</ul>
<p><span style="font-weight: 400;">El estilo de aserción se expone a través de la interfaz </span><b><i>assert</i></b><span style="font-weight: 400;">. Proporciona la notación clásica de punto de afirmación, similar a la que se incluye con </span><b>node.js</b><span style="font-weight: 400;">. Este módulo de aserción, sin embargo, proporciona varias pruebas adicionales y es compatible con el navegador.</span></p>
<p><span style="font-weight: 400;">En todos los casos, el estilo de aserción permite incluir un mensaje opcional como último parámetro en la declaración de aserción. Estos se incluirán en los mensajes de error en caso de que su afirmación no se apruebe.</span></p>
<p><span style="font-weight: 400;"><img src="img2.2.png" width="406" height="31" alt="Estilo test driven development, assert" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<p><span style="font-weight: 400;"><img src="img3.1.png" width="406" height="50" alt="Estilo driven development, assert parte 2" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<ul>
<li><b>Estilos </b><b><i>Behavior Driven Development</i></b><b>, expect y should.</b></li>
</ul>
<p><span style="font-weight: 400;">El estilo BDD tiene dos variantes: </span><b>expect</b><span style="font-weight: 400;"> (</span><i><span style="font-weight: 400;">“esperar”</span></i><span style="font-weight: 400;">) y </span><b>should</b><span style="font-weight: 400;"> (“</span><i><span style="font-weight: 400;">debería”</span></i><span style="font-weight: 400;">). Ambos usan el mismo lenguaje encadenable para construir aserciones, pero difieren en la forma en que se construye inicialmente una aserción. En el caso de </span><b>should</b><span style="font-weight: 400;">, también hay algunas advertencias y herramientas adicionales para superar las advertencias.</span></p>
<p><span style="font-weight: 400;">La interfaz </span><b>expect</b><span style="font-weight: 400;"> proporciona una función como punto de partida para encadenar sus afirmaciones de lenguaje. Funciona en </span><b>node.js</b><span style="font-weight: 400;"> y en todos los navegadores.</span></p>
<p><span style="font-weight: 400;"><img src="img4.1.png" width="406" height="73" alt="Estilo behavior driven" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<p><span style="font-weight: 400;">La interfaz </span><b>should</b><span style="font-weight: 400;"> extiende </span><b><i>Object.prototype</i></b><span style="font-weight: 400;"> para proporcionar un solo captador como punto de partida para sus afirmaciones de lenguaje. Funciona en </span><b>node.js</b><span style="font-weight: 400;"> y en todos los navegadores modernos </span><span style="font-weight: 400;">excepto Internet Explorer</span><span style="font-weight: 400;">.</span></p>
<p><span style="font-weight: 400;"><img src="img5.1.png" width="406" height="55" alt="Estilo should" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<p><span style="font-weight: 400;">Es posible obtener una descripción detallada de las APIs de aserciones en la web: </span><a href="https://www.chaijs.com/api/"><span style="font-weight: 400;">https://www.chaijs.com/api/</span></a><span style="font-weight: 400;">.   </span></p>
<h2><span style="font-weight: 400;">Ejecución automatizada de las pruebas</span></h2>
<h3><span style="font-weight: 400;">Ejecución de pruebas desde el terminal</span></h3>
<p><span style="font-weight: 400;">El fichero </span><b>package.json</b><span style="font-weight: 400;"> es un archivo de </span><b>definición</b><span style="font-weight: 400;"> o </span><b>manifiesto</b><span style="font-weight: 400;"> para nuestro proyecto, en el cual especificamos los datos de configuración y referencias del proyecto como: autor, repositorio, versión, descripción, scripts  y sobre todo las dependencias, entre otros. Para posibilitar la ejecución automatizada de los casos de prueba es necesario que el fichero </span><b>package.json </b><span style="font-weight: 400;">incluya entre las dependencias instaladas el </span><i><span style="font-weight: 400;">framework</span></i> <b>mocha,</b><span style="font-weight: 400;"> y la entrada </span><b><i>“scripts”</i></b><span style="font-weight: 400;"> debe contar con el campo </span><b><i>“test”</i></b><span style="font-weight: 400;"> que haga correctamente referencia a </span><b>mocha</b><span style="font-weight: 400;"> y los distintos directorios donde se encuentran los ficheros de prueba (</span><b><i>.spec.js</i></b><span style="font-weight: 400;">).</span></p>
<p><span style="font-weight: 400;"><img src="img6.png" width="413" height="113" alt="Pruebas desde el terminal parte 1" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<p><span style="font-weight: 400;"><img src="img7.png" width="413" height="201" alt="Pruebas desde el terminal parte 2" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<p><span style="font-weight: 400;">Una vez configurado correctamente el proyecto y desarrolladas las distintas clases y componentes, así como los casos de prueba asociadas a la mismas será posible su ejecución desde la consola de comandos tecleando: </span><b>npm test</b><span style="font-weight: 400;">.</span></p>
<p><span style="font-weight: 400;"><img src="img8.png" width="524" height="654" alt="Pruebas desde el terminal" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<p><span style="font-weight: 400;">Tras la ejecución de las pruebas se mostrará una pantalla resumen con los resultados obtenidos por cada una de ellas. Cada </span><b>it</b><span style="font-weight: 400;"> ejecutado correctamente aparecerá marcado con una V de color verde (</span><b>V</b><span style="font-weight: 400;">).</span></p>
<p><span style="font-weight: 400;"><img src="img9.png" width="527" height="640" alt="Pruebas desde el terminal" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<p><span style="font-weight: 400;">En caso de producirse algún error, nos aparecerá marcado en rojo y en la parte inferior del informe de ejecución nos mostrará una descripción detallada de los valores obtenidos y los esperados.</span></p>
<h3><span style="font-weight: 400;">Generación de informes de ejecución de pruebas en formato HTML</span></h3>
<p><span style="font-weight: 400;">Existen herramientas como </span><b><i>Mochawesome</i></b><span style="font-weight: 400;"> que permiten generar informes independientes sobre la ejecución de los casos de prueba en formato HTML/CSS para ayudar a visualizar los resultados. Entre las características de los informes destacan las siguientes:</span></p>
<ul>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Diseño simple, limpio y moderno.</span></li>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Gráficos elegantes (a través de ChartJS).</span></li>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Soporte para anidación de pruebas y conjuntos.</span></li>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Revisión del código de prueba en línea.</span></li>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Soporte para agregar información de contexto a las pruebas.</span></li>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Diseño </span><i><span style="font-weight: 400;">responsive</span></i><span style="font-weight: 400;"> y compatible con dispositivos móviles.</span></li>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Visualización sin conexión.</span></li>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Soporta modo paralelo (</span><i><span style="font-weight: 400;">parallel mode</span></i><span style="font-weight: 400;">).</span></li>
</ul>
<p><span style="font-weight: 400;">Para poder hacer uso de estos informes simplemente será necesario seguir unos sencillos pasos:</span></p>
<ol>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Instala </span><b><i>mochawesome</i></b><span style="font-weight: 400;"> en tu proyecto: </span><b><i>npm install mochawesome --save-dev.</i></b></li>
<li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Indica, en el fichero </span><b><i>package.json,</i></b><span style="font-weight: 400;"> a </span><b>mocha</b><span style="font-weight: 400;"> que utilice el generador de informes </span><b><i>mochasewome: </i></b><i><span style="font-weight: 400;">mocha test/unitarias test/integracion -- reporter mochawesome</span></i></li>
</ol>
<p><i><span style="font-weight: 400;"><img src="img10.png" width="556" height="179" alt="Generación de informes" style="display: block; margin-left: auto; margin-right: auto;" /></span></i></p>
<p><span style="font-weight: 400;">Una vez ejecutado el comando </span><b>npm test</b><span style="font-weight: 400;"> el informe se generará dentro de la carpeta del proyecto un directorio denominado </span><b><i>mochawesome-report.</i></b></p>
<p><i><span style="font-weight: 400;"><img src="img11.png" width="567" height="275" alt="Imagen de los informes" style="display: block; margin-left: auto; margin-right: auto;" /></span></i></p>
</div>
<p></p>
</div>
</div>
</article>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="b_desarrollando_el_software.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="d_ampliacin.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<script type="text/javascript" src="_intef_js.js"></script></body></html>